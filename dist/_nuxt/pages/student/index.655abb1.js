(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1127:function(e,t,r){var content=r(1136);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(123).default)("541cdaf8",content,!0,{sourceMap:!1})},1135:function(e,t,r){"use strict";var o=r(1127);r.n(o).a},1136:function(e,t,r){(t=r(122)(!1)).push([e.i,".register_div{position:absolute;width:400px;height:400px;top:20%;left:50%;margin-top:-180px;margin-left:-150px}.register_form2{width:400px;height:400px;background:grey;border-radius:10px;margin:0;padding:0}",""]),e.exports=t},1141:function(e,t,r){"use strict";r.r(t);var o=r(70),n=(r(582),r(92),r(21)),l={created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=localStorage.getItem("user"),o=JSON.parse(r),e.user=o,"STUDENT"===o.type?null==o.meta&&""==o.meta||e.fetchStudentDocuments(o.meta):e.fetchAllDocuments();case 4:case"end":return t.stop()}}),t)})))()},data:function(){return{course:"",items:[],data:[],columns:[],datatables:[],user:null}},methods:{fetchStudentDocuments:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=[],t.columns=[],t.columns=[{title:"Type",dataIndex:"type",key:"type",scopedSlots:{customRender:"type"}},{title:"Class",dataIndex:"class",key:"class",scopedSlots:{customRender:"class"}},{title:"Year",dataIndex:"year",key:"year",scopedSlots:{customRender:"year"}},{title:"Course",dataIndex:"course",key:"course",scopedSlots:{customRender:"course"}},{title:"Document",dataIndex:"filelink",key:"filelink",scopedSlots:{customRender:"filelink"}}],t.data=[],o.firestore().collection("documents").where("course","==",e).get().then((function(e){e.forEach((function(e){n.push({id:e.id,type:e.data().type,class:e.data().class,year:e.data().year,course:e.data().course,linkurl:e.data().linkurl,filelink:e.data().filelink,status:e.data().status})}))})).catch((function(e){console.log("Error getting documents: ",e)})),t.datatables=n;case 7:case"end":return r.stop()}}),r)})))()},fetchAllDocuments:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],e.columns=[],e.columns=[{title:"Type",dataIndex:"type",key:"type",scopedSlots:{customRender:"type"}},{title:"Class",dataIndex:"class",key:"class",scopedSlots:{customRender:"class"}},{title:"Year",dataIndex:"year",key:"year",scopedSlots:{customRender:"year"}},{title:"Course",dataIndex:"course",key:"course",scopedSlots:{customRender:"course"}},{title:"Document",dataIndex:"filelink",key:"filelink",scopedSlots:{customRender:"filelink"}},{title:"Description",dataIndex:"description",key:"description",scopedSlots:{customRender:"description"}}],e.data=[],o.firestore().collection("documents").get().then((function(e){e.forEach((function(e){r.push({id:e.id,type:e.data().type,class:e.data().class,year:e.data().year,course:e.data().course,linkurl:e.data().linkurl,filelink:e.data().filelink,status:e.data().status})}))})).catch((function(e){console.log("Error getting documents: ",e)})),e.datatables=r;case 7:case"end":return t.stop()}}),t)})))()}}},c=r(69),d=Object(c.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.datatables.length>0?r("div",[r("a-table",{attrs:{columns:e.columns,"data-source":e.datatables},scopedSlots:e._u([{key:"type",fn:function(text){return r("a",{},[e._v(e._s(text))])}},{key:"year",fn:function(t){return r("span",{},[r("a-tag",{attrs:{color:"green"}},[e._v("\n              "+e._s(t.toUpperCase())+"\n            ")])],1)}},{key:"Document",fn:function(text,t){return r("span",{},[r("a-button",{attrs:{type:"primary",size:"small"}},[e._v("View Documents")])],1)}},{key:"filelink",fn:function(text){return r("span",{},[r("a",{attrs:{href:text,target:"_new"}},[e._v(" Open Link/File ")])])}}],null,!1,2446173813)})],1):r("div",[r("span",{staticStyle:{"text-color":"red"}},[e._v("\n    No Records Found!\n  ")])])}),[],!1,null,null,null).exports,m=(r(93),r(49),{data:function(){return{error:"",errors:[],visible:!1,selectedUser:null,form:{firstname:"",lastname:"",stdnumber:"",address:"",email:"",phone:"",gender:"",dob:"",course:""},course:"",items:[],documentId:""}},methods:{updateProfile:function(){this.errors=[];var e=this.form.firstname,t=this.form.lastname,address=this.form.address,r=this.form.phone,n=this.form.course;(""===e&&this.errors.push("FirstName field cannot be empty"),""===t&&this.errors.push("LastName field cannot be empty"),""===r&&this.errors.push("Phone field cannot be empty"),""===address&&this.errors.push("Address field cannot be empty"),this.errors.length>0)||(o.firestore().collection("students").doc(this.documentId).update({firstname:e,lastname:t,address:address,phone:r,course:n}),this.$message.info("Profile succefully updated."))},fetchCourses:function(){var e=this;this.items=[],o.firestore().collection("courses").get().then((function(t){t.forEach((function(t){e.items.push({value:t.data().name,label:t.data().name})}))})).finally((function(){return console.log("Ã‡ompleted loading ...")}))}},created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.fetchCourses(),(r=localStorage.getItem("user"))&&(n=JSON.parse(r),o.firestore().collection("students").where("user_id","==",n.id).get().then((function(t){var r="";t.forEach((function(t){r=t.id;var o=t.data();e.form.firstname=o.firstname,e.form.lastname=o.lastname,e.form.address=o.address,e.form.phone=o.phone,e.form.stdnumber=o.studentnumber,e.form.course=o.course,e.form.email=n.email,e.form.dob=n.dob,e.form.gender=n.gender})),e.documentId=r})).catch((function(e){console.log("Error getting documents: ",e)})));case 3:case"end":return t.stop()}}),t)})))()}}),f=(r(1135),{components:{documents:d,profile:Object(c.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"Update Your Profile","sub-title":""}}),e._v(" "),r("div",[r("a-form",{staticClass:"register-form2",attrs:{id:"register",model:e.form},on:{submit:e.updateProfile},nativeOn:{submit:function(e){e.preventDefault()}}},[r("br"),e._v(" "),r("a-form-item",[r("a-input",{attrs:{placeholder:"Student/NO",disabled:""},model:{value:e.form.stdnumber,callback:function(t){e.$set(e.form,"stdnumber",t)},expression:"form.stdnumber"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"number"},slot:"prefix"})],1)],1),e._v(" "),r("a-form-item",[r("a-input",{attrs:{placeholder:"Email",disabled:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),e._v(" "),r("a-form-item",[r("a-input",{attrs:{placeholder:"Phone"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"phone"},slot:"prefix"})],1)],1),e._v(" "),r("a-form-item",[r("a-input",{attrs:{placeholder:"FirstName"},model:{value:e.form.firstname,callback:function(t){e.$set(e.form,"firstname",t)},expression:"form.firstname"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),e._v(" "),r("a-form-item",[r("a-input",{attrs:{placeholder:"LastName"},model:{value:e.form.lastname,callback:function(t){e.$set(e.form,"lastname",t)},expression:"form.lastname"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),e._v(" "),r("a-form-item",[r("a-select",{attrs:{placeholder:"Gender",disabled:""},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[r("a-select-option",{attrs:{value:"Architect"}},[e._v("Male")]),e._v(" "),r("a-select-option",{attrs:{value:"Artisan"}},[e._v("Female")])],1)],1),e._v(" "),r("a-form-item",[r("a-input",{attrs:{placeholder:"Date of Birth",disabled:""},model:{value:e.form.dob,callback:function(t){e.$set(e.form,"dob",t)},expression:"form.dob"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),e._v(" "),r("a-form-item",[r("a-input",{attrs:{placeholder:"Address"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"pull-request"},slot:"prefix"})],1)],1),e._v(" "),r("a-form-item",[r("a-select",{attrs:{placeholder:"Courses",options:this.items},model:{value:e.form.course,callback:function(t){e.$set(e.form,"course",t)},expression:"form.course"}})],1),e._v(" "),r("a-form-item",[r("a-button",{attrs:{type:"primary"},on:{click:e.updateProfile}},[e._v("Update Record")]),e._v(" "),r("br"),e._v(" "),r("br"),e._v(" "),r("p",[e.errors.length?r("a-alert",{attrs:{message:"",closable:"",type:"error"}},[r("p",{attrs:{slot:"description"},slot:"description"},[r("span",{staticStyle:{color:"red"}},[e._v("\n             Errors\n               "),r("ul",e._l(e.errors,(function(t){return r("li",{key:t},[e._v(e._s(t))])})),0)])])]):e._e()],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{component:"",Title:"",current:"documents",error:"",visible:!1,errors:[],currentUser:null}},methods:{logOut:function(){localStorage.removeItem("user"),this.$router.push("/")},handleClick:function(menu){switch(menu.key){case"documents":this.component="documents";break;case"messages":this.component="";break;case"profile":this.component="profile"}}},created:function(){var e=localStorage.getItem("user");if(e){var t=JSON.parse(e);t&&"STUDENT"===t.type?this.currentUser=t:this.$router.push("/")}else this.$router.push("/")}}),h=Object(c.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-layout",[r("a-layout-header",{style:{position:"fixed",zIndex:1,width:"100%"}},[r("div",{staticClass:"logo"}),e._v(" "),r("a-menu",{style:{lineHeight:"64px"},attrs:{theme:"dark",mode:"horizontal"},on:{click:e.handleClick},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}},[r("a-menu-item",{key:"documents"},[r("a-icon",{attrs:{type:"folder"}}),e._v("Documents")],1),e._v(" "),r("a-sub-menu",[r("span",{staticClass:"submenu-title-wrapper",attrs:{slot:"title"},slot:"title"},[r("a-icon",{attrs:{type:"user"}}),e._v("Myaccount\n        ")],1),e._v(" "),r("a-menu-item-group",{attrs:{title:""}},[r("a-menu-item",{key:"profile"},[e._v("Edit Profile")]),e._v(" "),r("a-menu-item",{key:"logout",on:{click:function(t){return e.logOut()}}},[e._v("Logout")])],1)],1)],1)],1),e._v(" "),r("a-layout-content",{style:{padding:"0 50px",marginTop:"64px"}},[r("a-breadcrumb",{style:{margin:"16px 0"}}),e._v(" "),r("div",{style:{background:"#fff",padding:"24px",minHeight:"500px"}},[r(e.component,{tag:"component"})],1)],1),e._v(" "),r("a-layout-footer",{style:{textAlign:"center"}},[e._v("\n      Copyright  2023\n    ")])],1)],1)}),[],!1,null,"785fc872",null);t.default=h.exports}}]);